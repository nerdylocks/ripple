"use strict";var rippleApp=angular.module("rippleTestApp",["ngCookies","ngResource","ngSanitize","ngRoute","nvd3ChartDirectives"]);rippleApp.config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}]),rippleApp.factory("RippleRemote",["$rootScope",function(a){return{init:function(){a.connected=!1,a.$on("CONNECTED",function(){a.connected=!0}),a.$on("CONNECTING",function(){a.connecting=!0}),a.$on("DISCONNECTED",function(){a.connected=!1}),a.currencyTypes={BTC:{amount:0,currency:"BTC"},CNY:{amount:0,currency:"CNY"},USD:{amount:0,currency:"USD"},AUD:{amount:0,currency:"AUD"},XRP:{amount:0,currency:"XRP"},CAD:{amount:0,currency:"CAD"},EUR:{amount:0,currency:"EUR"},other:{amount:0,currency:"other"}};var b=ripple.Remote;this.remote=new b({trace:!1,trusted:!0,local_signing:!0,connection_offest:60,servers:[{host:"s1.ripple.com",port:443,secure:!0,pool:3}]})},on:function(a,b){var c=this;this.remote.connect(function(){c.remote.on(a,b)})}}}]),rippleApp.controller("MainCtrl",["$scope","$rootScope","RippleRemote",function(a,b,c){function d(a){b.$apply(function(){if(b.$emit("CONNECTED"),0==a.engine_result_code)if(a.transaction.hasOwnProperty("TakerPays")){if(a.transaction.TakerPays.hasOwnProperty("currency")){var c=b.currencyTypes[a.transaction.TakerPays.currency]||b.currencyTypes.other;b.currencyTypes[c.currency].amount++,e.countIndicator(c.currency)}}else if(a.transaction.hasOwnProperty("TakerGets")&&a.transaction.TakerPays.hasOwnProperty("currency")){var c=b.currencyTypes[a.transaction.TakerGets.currency]||b.currencyTypes.other;b.currencyTypes[c.currency].amount++,e.countIndicator(c.currency)}b.chartData=[{key:"BTC",y:b.currencyTypes.BTC.amount+1},{key:"CNY",y:b.currencyTypes.CNY.amount+1},{key:"USD",y:b.currencyTypes.USD.amount+1},{key:"AUD",y:b.currencyTypes.AUD.amount+1},{key:"XRP",y:b.currencyTypes.XRP.amount+1},{key:"CAD",y:b.currencyTypes.CAD.amount+1},{key:"EUR",y:b.currencyTypes.EUR.amount+1}]})}c.init(),a.connect=function(){b.$emit("CONNECTING"),c.on("transaction_all",d)};var e={countIndicator:function(a){var b=$(".list-group a."+a+".list-group-item");b.addClass("hit"),setTimeout(function(){b.removeClass("hit")},140)}};a.xFunction=function(){return function(a){return a.key}},a.yFunction=function(){return function(a){return a.y}}}]);